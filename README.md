# cfi-map2-sampling-grids
Creates geospatial sampling grids to implement adaptive cluster sampling in 5 cities for the Center for Financial Inclusion (CFI) and Mastercard-Accion-Partnership (MAP) demand-side study that will examine digital adoption and resilience among micro and small businesses. 

**Description**

This repository contains all of the data and code necessary to reproduce the "Stage 1" geospatial sampling grids for the five cities included the study, namely: Sao Paolo (Brazil), Addis Ababa (Ethiopia), Jakarta (Indonesia), Delhi (India) and Lagos (Nigeria). The methodology for each city is described in detail n the */documentation* folder. 

**Data and Code Availability Statement**

The primary data sets used in this analysis are available publicly from the [GADM](), [Humanitarian data exchange](), and [Google Earth Engine](). 

**Computational requirements**
This analysis was conducted using Python (v3.12.2) and VSCode (v1.87). 
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Ventura 13.3.1

**Instructions for Data Preparation and Analysis**
The full workflow for creating the sampling grids is in the : *notebooks/create_grid.ipynb* notebook. This notebook proceeds in three steps: (1) Downloads administrative boundaries to define the sampling boundary, (2) Partitions the boundary into a grid of 'blocks', (3) Identifies which blocks in the boundary are 'built-up' and (4) selects 125 blocks at random for the initial sample of blocks whose businesses will be enumerated during fieldwork. Custom functions for visualizing raseter and vector data, retreiving administrative boundares and creating a custom geospatial grid, are found in the *notebooks/utils.py* file. 

**Outputs**
All outputs generated by *notebooks/create_grid.ipynb* are in the *outputs* folder organized by country. 
The final sampling grids, representing a feature collection of all block geometries (including blocks not in the sample) with additional descriptive columns are available as a shapefile and a geojson file as follows: final_sampling_grid.shp and final_sampling_grids.geojson. Both of these datasets have a field "block_id" which corresponds to the unique ID of the block and a field called "in_sample" which takes on a value of 1 if the block is in the inital sample of blocks and 0 if not. In additional there are files called sampled_blocks_only.geojson and sampled_blocks_only.geojson that contain only the 125 sampled blocks. 